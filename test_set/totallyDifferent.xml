<description xmlns="http://cpee.org/ns/description/1.0">
    <call id="a6" endpoint="get_offset_base">
        <parameters>
            <label>Get first offset</label>
            <arguments/>
            <stream>
                <sensors/>
                <aggregators/>
                <costs/>
            </stream>
        </parameters>
        <code>
            <prepare/>
            <finalize output="result">data.direction_first = result data.direction_first['x'] = data.direction_first['dir_x'] * 6 data.direction_first['y'] = data.direction_first['dir_y'] * 6</finalize>
            <update output="result"/>
            <rescue output="result"/>
        </code>
        <annotations>
            <_timing>
                <_timing_wait/>
                <_timing_threshold/>
                <_timing_min/>
                <_timing_max/>
                <_timing_avg/>
            </_timing>
            <_notes>
                <_notes_general/>
            </_notes>
        </annotations>
    </call>
    <call id="a10" endpoint="move_rel">
        <parameters>
            <label>Move closer</label>
            <arguments>
                <x>!data.direction_first['x']</x>
                <y>!data.direction_first['y']</y>
            </arguments>
            <stream>
                <sensors/>
                <aggregators/>
                <costs/>
            </stream>
        </parameters>
        <annotations>
            <_timing>
                <_timing_wait/>
                <_timing_threshold/>
                <_timing_min/>
                <_timing_max/>
                <_timing_avg/>
            </_timing>
            <_notes>
                <_notes_general/>
            </_notes>
        </annotations>
    </call>
    <call id="a17" endpoint="get_offset_base">
        <parameters>
            <label>Get second offset and calc distance</label>
            <arguments/>
            <stream>
                <sensors/>
                <aggregators/>
                <costs/>
            </stream>
        </parameters>
        <code>
            <prepare/>
            <finalize output="result">data.direction_second = result if (data.direction_first['dir_x'] * data.direction_second['dir_x'] >= 0) data.traveled = data.direction_first['len'] - data.direction_second['len'] else data.traveled = data.direction_first['len'] + data.direction_second['len'] end data.len = data.direction_second['len'] / (data.traveled / 6) data.direction_second['x'] = data.direction_second['dir_x'] * data.len data.direction_second['y'] = data.direction_second['dir_y'] * data.len</finalize>
            <update output="result"/>
            <rescue output="result"/>
        </code>
        <annotations>
            <_timing>
                <_timing_wait/>
                <_timing_threshold/>
                <_timing_min/>
                <_timing_max/>
                <_timing_avg/>
            </_timing>
            <_notes>
                <_notes_general/>
            </_notes>
        </annotations>
    </call>
    <call id="a12" endpoint="move_rel">
        <parameters>
            <label>Move closer</label>
            <arguments>
                <x>!data.direction_second['x']</x>
                <y>!data.direction_second['y']</y>
            </arguments>
            <stream>
                <sensors/>
                <aggregators/>
                <costs/>
            </stream>
        </parameters>
        <annotations>
            <_timing>
                <_timing_wait/>
                <_timing_threshold/>
                <_timing_min/>
                <_timing_max/>
                <_timing_avg/>
            </_timing>
            <_notes>
                <_notes_general/>
            </_notes>
        </annotations>
    </call>
    <call id="a2" endpoint="get_offset_base">
        <parameters>
            <label>Investigate Precision</label>
            <arguments/>
            <stream>
                <sensors/>
                <aggregators/>
                <costs/>
            </stream>
        </parameters>
        <code>
            <prepare/>
            <finalize output="result">data.direction_third = result</finalize>
            <update output="result"/>
            <rescue output="result">'Oh no!'</rescue>
        </code>
        <annotations>
            <_timing>
                <_timing_wait/>
                <_timing_threshold/>
                <_timing_min/>
                <_timing_max/>
                <_timing_avg/>
            </_timing>
            <_notes>
                <_notes_general/>
            </_notes>
        </annotations>
    </call>
    <manipulate id="a11" label="Calculate new position">data.item = {} data.item['adjust_x'] = (data.direction_first['x'] + data.direction_second['x']).round(0) data.item['adjust_y'] = (data.direction_first['y'] + data.direction_second['y']).round(0)</manipulate>
</description>